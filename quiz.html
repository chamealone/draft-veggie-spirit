<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Quiz Veggie Spirit</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@500&family=Poppins&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f9f9f9;
      color: #333;
      padding: 40px;
      max-width: 700px;
      margin: auto;
    }

    h1 {
      font-family: 'Fredoka', cursive;
      font-size: 2rem;
      margin-bottom: 20px;
      text-align: center;
    }

    .question-box {
      margin-bottom: 30px;
    }

    .question-text {
      font-size: 1.1rem;
      margin-bottom: 20px;
    }

    .option {
      display: block;
      margin: 10px 0;
      cursor: pointer;
    }

    input[type="radio"] {
      margin-right: 10px;
    }

    .navigation {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
    }

    .button-55 {
      align-self: center;
      background-color: #fff;
      background-image: none;
      background-position: 0 90%;
      background-repeat: repeat no-repeat;
      background-size: 4px 3px;
      border-radius: 15px 225px 255px 15px 15px 255px 225px 15px;
      border-style: solid;
      border-width: 2px;
      box-shadow: rgba(0, 0, 0, .2) 15px 28px 25px -18px;
      box-sizing: border-box;
      color: #41403e;
      cursor: pointer;
      display: inline-block;
      font-family: Neucha, sans-serif;
      font-size: 1rem;
      line-height: 23px;
      outline: none;
      padding: .75rem 1.5rem;
      text-decoration: none;
      transition: all 235ms ease-in-out;
      border-bottom-left-radius: 15px 255px;
      border-bottom-right-radius: 225px 15px;
      border-top-left-radius: 255px 15px;
      border-top-right-radius: 15px 225px;
      user-select: none;
      -webkit-user-select: none;
      touch-action: manipulation;
    }

    .button-55:hover {
      box-shadow: rgba(0, 0, 0, .3) 2px 8px 8px -5px;
      transform: translate3d(0, 2px, 0);
    }

    .button-55:focus {
      box-shadow: rgba(0, 0, 0, .3) 2px 8px 4px -6px;
    }

    .progress {
      text-align: center;
      margin-bottom: 10px;
      font-size: 0.95rem;
      color: #777;
    }
  </style>
</head>
<body>
  <h1>Quiz Veggie Spirit</h1>
  <div class="progress" id="progressText"></div>
  <div id="quizContainer"></div>

  <div class="navigation">
    <button id="backBtn" class="button-55">Back</button>
    <button id="nextBtn" class="button-55">Next</button>
  </div>

  <script src="script.js"></script>
  <script>
    let currentQuestion = 0;
    let selectedOptions = new Array(questions.length).fill(null);

    const quizContainer = document.getElementById('quizContainer');
    const nextBtn = document.getElementById('nextBtn');
    const backBtn = document.getElementById('backBtn');
    const progressText = document.getElementById('progressText');

    function renderQuestion(index) {
      quizContainer.innerHTML = '';
      const question = questions[index];

      progressText.textContent = `Pertanyaan ${index + 1} dari ${questions.length}`;

      const qDiv = document.createElement('div');
      qDiv.className = 'question-box';

      const qText = document.createElement('div');
      qText.className = 'question-text';
      qText.textContent = question.text;
      qDiv.appendChild(qText);

      question.options.forEach((opt, i) => {
        const label = document.createElement('label');
        label.className = 'option';

        const radio = document.createElement('input');
        radio.type = 'radio';
        radio.name = 'question';
        radio.value = i;

        // Mark previously selected option
        if (selectedOptions[index] === i) {
          radio.checked = true;
        }

        label.appendChild(radio);
        label.appendChild(document.createTextNode(opt.text));
        qDiv.appendChild(label);
      });

      quizContainer.appendChild(qDiv);

      // Update button text
      nextBtn.textContent = (index === questions.length - 1) ? 'Lihat Hasil' : 'Next';
      backBtn.style.visibility = index === 0 ? 'hidden' : 'visible';
    }

    nextBtn.onclick = function () {
      const selected = document.querySelector('input[name="question"]:checked');
      if (!selected) {
        alert('Pilih salah satu jawaban sebelum lanjut.');
        return;
      }

      selectedOptions[currentQuestion] = Number(selected.value);

      if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        renderQuestion(currentQuestion);
      } else {
        processResultAndRedirect(selectedOptions);
      }
    };

    backBtn.onclick = function () {
      if (currentQuestion > 0) {
        currentQuestion--;
        renderQuestion(currentQuestion);
      }
    };

    renderQuestion(currentQuestion);
  </script>
</body>
</html>


